{"name":"Php-coding-and-environment-recommendations","tagline":"","body":"[PSR-0]: https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md\r\n[PSR-1]: https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md\r\n[PSR-2]: https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-2-coding-style-guide.md\r\n[PSR-3]: https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-3-logger-interface.md\r\n[RFC 2119]: http://www.ietf.org/rfc/rfc2119.txt\r\n[XDebug]: http://xdebug.org\r\n[XHProf]: https://github.com/facebook/xhprof\r\n\r\nOverwiev\r\n===================\r\nThis document describes the mandatory requirements and recommendations for coding in PHP and creating PHP environments.\r\n\r\nThe key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\", \"SHALL NOT\", \"SHOULD\",\r\n\"SHOULD NOT\", \"RECOMMENDED\", \"MAY\", and \"OPTIONAL\" in this document are to be\r\ninterpreted as described in [RFC 2119][].\r\n\r\n1. Recommended PHP version\r\n-----------\r\nRecommended PHP version is 5.5.x. Developer SHALL NOT use version lower than 5.4. All versions MUST be up to date.\r\n\r\n2. Development environment\r\n-----------\r\n- Developer MUST use PHP with Apache2. \r\n- It's RECOMMENDED to use *nix OS (Linux, MacOS X)\r\n- Developer SHOULD use debugging extensions ([XDebug][], [XHProf][])\r\n\r\n3. Production and staging environment\r\n-----------\r\n- Access to remote servers SHOULD be available only by Public Key Infrastructure\r\n- Debugging extensions MUST NOT be used in production environment\r\n- All used PHP extenstions SHOULD be in stable version. If unstable version is used it MUST be properly tested prior to deployment\r\n- When setting up remote server, directory listing MUST be disabled\r\n- Project backend MUST NOT be accessible from the Internet. It's RECOMMENDED to place it in home dir and create symlink to /var/www\r\n\r\n4. Basic coding standards\r\n-----------\r\n- Code MUST follow all rules outlined in [PSR-0][]\r\n- Code MUST follow all rules outlined in [PSR-1][]\r\n- Code MUST follow all rules outlined in [PSR-2][]\r\n- Code MUST follow all rules outlined in [PSR-3][]\r\n\r\n5. Naming conventions\r\n-----------\r\nEvery developer SHOULD be able to read code like a book. Proper naming is much better than hundrets of documentation lines.\r\n\r\n\r\n### 5.1. Variables\r\n- Variable name MUST describe its purpose. \r\n- All variables MUST be declared in ```camelCase```\r\n\r\nExample:\r\n```php\r\n<?php\r\n\r\n// bad\r\n$m = new Movie();\r\n$mc = new MovieCollection();\r\n\r\n// good\r\n$movie = new Movie()\r\n$movieCollection = new MovieCollection();\r\n```\r\n### 5.2. Functions\r\n- Function visibility MUST be declared (public, protected, private). \r\n- Function declaration MUST follow given pattern: ```public [static] function functionName() ```\r\n- Functions MUST be sorted by visibility:\r\n    - public\r\n    - protected\r\n    - private\r\n- Function name MUST describe its purpose using verbs like is, has, can, get, set. Example:\r\n```php\r\n<?php\r\n\r\n//bad\r\nclass BadMovie\r\n{\r\n    protected $rate = 0;\r\n    \r\n    public function rated()\r\n    {\r\n        return $this->rate > 0;\r\n    }\r\n    \r\n    \r\n    public function rate()\r\n    {\r\n        return $this->rate;\r\n    }\r\n}\r\n\r\n\r\n//good\r\nclass GoodMovie\r\n{\r\n    protected $rate = 0;\r\n    \r\n    public function hasRate()\r\n    {\r\n        return $this->rate > 0;\r\n    }\r\n    \r\n    \r\n    public function getRate()\r\n    {\r\n        return $this->rate;\r\n    }\r\n}\r\n```\r\n\r\n### 5.3. Classes\r\n- Class name MUST describe its purpose. \r\nExample:\r\n```php\r\n<?php\r\n// bad\r\nclass Movies\r\n{\r\n}\r\n\r\n// good\r\nclass MovieCollection\r\n{\r\n}\r\n```\r\n- Class name MAY NOT be unique in whole project scope. It's handled by namespaces.\r\nExample:\r\n```php\r\n<?php\r\nnamespace \\BM\\Api1;\r\nclass Response\r\n{\r\n}\r\n\r\nnamespace \\BM\\Api2;\r\nclass Response\r\n{\r\n}\r\n```\r\n\r\n- Special types of classes MUST be followed by suffixes:\r\n    - *Trait for Traits: ```trait SomeTrait ```\r\n    - *Collection for collections: ```class SomeCollection ```\r\n    - *Controller for controllers: ```class SomeController ```\r\n- Class MUST be used only for the purpose it was designed for. For example: Developer CAN NOT use MoviesCollection to store collection of Cookies.\r\n\r\n\r\n6. Exceptions\r\n----------\r\n- Custom exception constructor MUST accept exception message\r\n- Custom exception MAY have default message. \r\n- When message is passed as parameter in constructor it MUST override default message\r\n- Custom exceptions SHOULD extend one of two base types:\r\n    - InternalException - content of this exception MUST NOT be displayed (except for dev environment)\r\n    - FriendlyException - content of this exception MAY be displayed\r\n- All exceptions SHOULD be handled\r\n- InternalException MUST be reported by email\r\n- FriendlyException MAY be reported by email\r\n- Different types of exceptions SHOULD be catched in multiple catch blocks\r\n- There SHOULD be catch block for default Exception\r\n- All exceptions MUST be attached to variable $e\r\n```php\r\n<?php\r\ntry {\r\n\r\n} catch (FirstException $e) {\r\n\r\n} catch (SeconException $e) {\r\n\r\n} catch (Exception $e) {\r\n\r\n}\r\n```\r\n\r\n\r\n7. Typehinting\r\n---------\r\n- It's RECOMMENDED to hint the type of variable passed as function argument.\r\n- When variable is returned from another function it's type SHOULD be validated. \r\n\r\nExample:\r\n```php\r\n<?php\r\n\r\n// bad\r\nclass BadMovie\r\n{\r\n    protected $director;\r\n    \r\n    public function setDirector($director)\r\n    {\r\n        $this->director = $director;\r\n    }\r\n    \r\n    \r\n    public function getDirector()\r\n    {\r\n        return $this->director;\r\n    }\r\n}\r\n\r\n$badMovie = new BadMovie();\r\n$director = $badMovie->getDirector();\r\n$director->getName();\r\n\r\n// good\r\nclass GoodMovie\r\n{\r\n    protected $director;\r\n    \r\n    public function setDirector(Director $director)\r\n    {\r\n        $this->director = $director;\r\n    }\r\n    \r\n    \r\n    public function getDirector()\r\n    {\r\n        return $this->director;\r\n    }\r\n}\r\n\r\n$movie = new Movie();\r\n$director = $movie->getDirector();\r\n\r\n// bad \r\nif( $director ) {\r\n    $director->getName();\r\n}\r\n\r\n// good\r\nif( $director instanceof Director ) {\r\n    $director->getName();\r\n}\r\n```\r\n\r\n8. Return statements\r\n--------\r\n- Return statement SHOULD be preceded by new line unless return is the only statement in function\r\n\r\n9. Collections\r\n--------\r\n- Collection name MUST be followed by suffix Collection ```class SomeCollection```\r\n- Collection MUST be iterable\r\n- It's RECOMMENDED to extend ArrayObject\r\n \r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}